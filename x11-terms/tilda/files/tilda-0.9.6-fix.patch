From b9c7476295af33fd0af6cdd57c571a2867507590 Mon Sep 17 00:00:00 2001
From: microcai <microcai@fedoraproject.org>
Date: Fri, 18 Nov 2011 21:34:40 +0800
Subject: [PATCH] use gtk3

---
 configure.ac          |    5 +-
 src/Makefile.am       |    3 -
 src/eggaccelerators.c |   20 +-
 src/eggaccelerators.h |    4 +-
 src/key_grabber.c     |   10 +-
 src/tilda_terminal.c  |   49 +-
 src/tilda_window.c    |   55 +-
 src/tomboykeybinder.c |    9 +-
 src/wizard.c          |  121 ++---
 tilda.glade           | 1410 +++++++++++++++++++++++++++++++------------------
 10 files changed, 1019 insertions(+), 667 deletions(-)

diff --git a/configure.ac b/configure.ac
index aa4ae97..50868c5 100644
--- a/configure.ac
+++ b/configure.ac
@@ -53,10 +53,9 @@ esac
 
 # Checks for libraries.
 PKG_PROG_PKG_CONFIG
-PKG_CHECK_MODULES([GTK], [gtk+-2.0 >= 2.0.0])
+PKG_CHECK_MODULES([GTK], [gtk+-3.0])
 PKG_CHECK_MODULES([GTHREAD], [gthread-2.0])
-PKG_CHECK_MODULES([LIBGLADE], [libglade-2.0])
-PKG_CHECK_MODULES([VTE], [vte])
+PKG_CHECK_MODULES([VTE], [vte-2.90])
 PKG_CHECK_MODULES([LIBCONFUSE], [libconfuse])
 
 # Checks for header files.
diff --git a/src/Makefile.am b/src/Makefile.am
index d512b4f..00128fc 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -29,21 +29,18 @@ tilda_SOURCES = callback_func.h callback_func.c \
 tilda_CFLAGS = $(AM_CFLAGS) \
 		$(GTK_CFLAGS) \
 		$(GTHREAD_CFLAGS) \
-		$(LIBGLADE_CFLAGS) \
 		$(VTE_CFLAGS) \
 		$(LIBCONFUSE_CFLAGS)
 
 tilda_LDFLAGS = $(AM_LDFLAGS) \
 		$(GTK_LDFLAGS) \
 		$(GTHREAD_LDFLAGS) \
-		$(LIBGLADE_LDFLAGS) \
 		$(VTE_LDFLAGS) \
 		$(LIBCONFUSE_LDFLAGS)
 
 tilda_LDADD = $(AM_LDADD) \
 		$(GTK_LIBS) \
 		$(GTHREAD_LIBS) \
-		$(LIBGLADE_LIBS) \
 		$(VTE_LIBS) \
 		$(LIBCONFUSE_LIBS) \
 		$(LTLIBINTL) \
diff --git a/src/eggaccelerators.c b/src/eggaccelerators.c
index ca63e78..5e338c6 100644
--- a/src/eggaccelerators.c
+++ b/src/eggaccelerators.c
@@ -340,7 +340,7 @@ egg_accelerator_parse_virtual (const gchar            *accelerator,
  * 
  * Converts an accelerator keyval and modifier mask
  * into a string parseable by egg_accelerator_parse_virtual().
- * For example, if you pass in #GDK_q and #EGG_VIRTUAL_CONTROL_MASK,
+ * For example, if you pass in #GDK_KEY_q and #EGG_VIRTUAL_CONTROL_MASK,
  * this function returns "&lt;Control&gt;q".
  *
  * The caller of this function must free the returned string.
@@ -579,20 +579,20 @@ reload_modmap (GdkKeymap *keymap,
       j = 0;
       while (j < n_entries)
         {          
-          if (keyvals[j] == GDK_Num_Lock)
+          if (keyvals[j] == GDK_KEY_Num_Lock)
             mask |= EGG_VIRTUAL_NUM_LOCK_MASK;
-          else if (keyvals[j] == GDK_Scroll_Lock)
+          else if (keyvals[j] == GDK_KEY_Scroll_Lock)
             mask |= EGG_VIRTUAL_SCROLL_LOCK_MASK;
-          else if (keyvals[j] == GDK_Meta_L ||
-                   keyvals[j] == GDK_Meta_R)
+          else if (keyvals[j] == GDK_KEY_Meta_L ||
+                   keyvals[j] == GDK_KEY_Meta_R)
             mask |= EGG_VIRTUAL_META_MASK;
-          else if (keyvals[j] == GDK_Hyper_L ||
-                   keyvals[j] == GDK_Hyper_R)
+          else if (keyvals[j] == GDK_KEY_Hyper_L ||
+                   keyvals[j] == GDK_KEY_Hyper_R)
             mask |= EGG_VIRTUAL_HYPER_MASK;
-          else if (keyvals[j] == GDK_Super_L ||
-                   keyvals[j] == GDK_Super_R)
+          else if (keyvals[j] == GDK_KEY_Super_L ||
+                   keyvals[j] == GDK_KEY_Super_R)
             mask |= EGG_VIRTUAL_SUPER_MASK;
-          else if (keyvals[j] == GDK_Mode_switch)
+          else if (keyvals[j] == GDK_KEY_Mode_switch)
             mask |= EGG_VIRTUAL_MODE_SWITCH_MASK;
           
           ++j;
diff --git a/src/eggaccelerators.h b/src/eggaccelerators.h
index e4df317..eafae33 100644
--- a/src/eggaccelerators.h
+++ b/src/eggaccelerators.h
@@ -21,8 +21,8 @@
 #ifndef __EGG_ACCELERATORS_H__
 #define __EGG_ACCELERATORS_H__
 
-#include <gtk/gtkaccelgroup.h>
-#include <gdk/gdk.h>
+#include <gtk/gtk.h>
+#include <gdk/gdkkeysyms.h>
 
 G_BEGIN_DECLS
 
diff --git a/src/key_grabber.c b/src/key_grabber.c
index b93d3ee..90584b4 100644
--- a/src/key_grabber.c
+++ b/src/key_grabber.c
@@ -31,7 +31,7 @@
 #include <X11/keysym.h>
 #include <X11/Xutil.h>
 #include <X11/cursorfont.h>
-#include <gtk/gtkmain.h>
+#include <gtk/gtk.h>
 #include <unistd.h>
 #include <stdio.h>
 #include <stdlib.h>
@@ -123,9 +123,9 @@ void tilda_window_set_active (tilda_window *tw)
     DEBUG_FUNCTION ("tilda_window_set_active");
     DEBUG_ASSERT (tw != NULL);
 
-    Display *x11_display = GDK_WINDOW_XDISPLAY( tw->window->window );
-    Window *x11_window = GDK_WINDOW_XWINDOW( tw->window->window );
-    Window *x11_root_window = GDK_WINDOW_XWINDOW ( gtk_widget_get_root_window (tw->window) );
+    Display *x11_display = gdk_x11_get_default_xdisplay();
+    Window *x11_window = gdk_x11_window_get_xid( gtk_widget_get_window(tw->window) );
+    Window *x11_root_window = gdk_x11_window_get_xid ( gtk_widget_get_root_window (tw->window) );
     GdkScreen *screen = gtk_widget_get_screen (tw->window);
 
     XEvent event;
@@ -238,7 +238,7 @@ void pull (struct tilda_window_ *tw, enum pull_state state)
     {
         screen = gdk_screen_get_default();
         awin = gdk_screen_get_active_window(screen);
-        if (awin != tw->window->window) {
+        if (awin != gtk_widget_get_window(tw->window)) {
             int num =  gdk_screen_get_primary_monitor(screen);
             GdkRectangle rt;
             gdk_screen_get_monitor_geometry(screen, num, &rt);
diff --git a/src/tilda_terminal.c b/src/tilda_terminal.c
index 3bc0582..37b34f9 100644
--- a/src/tilda_terminal.c
+++ b/src/tilda_terminal.c
@@ -93,7 +93,7 @@ struct tilda_term_ *tilda_term_init (struct tilda_window_ *tw)
     term->vte_term = vte_terminal_new ();
 
     /* Create the scrollbar for the terminal */
-    term->scrollbar = gtk_vscrollbar_new (VTE_TERMINAL(term->vte_term)->adjustment);
+    term->scrollbar = gtk_vscrollbar_new (gtk_scrollable_get_vadjustment(term->vte_term));
 
     /* Set properties of the terminal */
     tilda_term_config_defaults (term);
@@ -220,8 +220,8 @@ static void iconify_window_cb (GtkWidget *widget, gpointer data)
     DEBUG_ASSERT (data != NULL);
 
     if (GTK_IS_WIDGET(data))
-        if ((GTK_WIDGET(data))->window)
-            gdk_window_iconify ((GTK_WIDGET(data))->window);
+        if ( gtk_widget_get_window(data))
+            gdk_window_iconify (gtk_widget_get_window(GTK_WIDGET(data)));
 }
 
 static void deiconify_window_cb (GtkWidget *widget, gpointer data)
@@ -230,8 +230,8 @@ static void deiconify_window_cb (GtkWidget *widget, gpointer data)
     DEBUG_ASSERT (data != NULL);
 
     if (GTK_IS_WIDGET(data))
-        if ((GTK_WIDGET(data))->window)
-            gdk_window_deiconify ((GTK_WIDGET(data))->window);
+        if (gtk_widget_get_window (GTK_WIDGET(data)) )
+            gdk_window_deiconify (gtk_widget_get_window (GTK_WIDGET(data)) );
 }
 
 static void raise_window_cb (GtkWidget *widget, gpointer data)
@@ -240,8 +240,8 @@ static void raise_window_cb (GtkWidget *widget, gpointer data)
     DEBUG_ASSERT (data != NULL);
 
     if (GTK_IS_WIDGET(data))
-        if ((GTK_WIDGET(data))->window)
-            gdk_window_raise ((GTK_WIDGET(data))->window);
+        if (gtk_widget_get_window (GTK_WIDGET(data)))
+            gdk_window_raise (gtk_widget_get_window (GTK_WIDGET(data)));
 }
 
 static void lower_window_cb (GtkWidget *widget, gpointer data)
@@ -250,8 +250,8 @@ static void lower_window_cb (GtkWidget *widget, gpointer data)
     DEBUG_ASSERT (data != NULL);
 
     if (GTK_IS_WIDGET(data))
-        if ((GTK_WIDGET(data))->window)
-            gdk_window_lower ((GTK_WIDGET(data))->window);
+        if (gtk_widget_get_window (GTK_WIDGET(data)))
+            gdk_window_lower (gtk_widget_get_window (GTK_WIDGET(data)));
 }
 
 static void maximize_window_cb (GtkWidget *widget, gpointer data)
@@ -260,8 +260,8 @@ static void maximize_window_cb (GtkWidget *widget, gpointer data)
     DEBUG_ASSERT (data != NULL);
 
     if (GTK_IS_WIDGET(data))
-        if ((GTK_WIDGET(data))->window)
-            gdk_window_maximize ((GTK_WIDGET(data))->window);
+        if (gtk_widget_get_window (GTK_WIDGET(data)))
+            gdk_window_maximize (gtk_widget_get_window (GTK_WIDGET(data)));
 }
 
 static void restore_window_cb (GtkWidget *widget, gpointer data)
@@ -270,8 +270,8 @@ static void restore_window_cb (GtkWidget *widget, gpointer data)
     DEBUG_ASSERT (data != NULL);
 
     if (GTK_IS_WIDGET(data))
-        if ((GTK_WIDGET(data))->window)
-            gdk_window_unmaximize ((GTK_WIDGET(data))->window);
+        if (gtk_widget_get_window (GTK_WIDGET(data)))
+            gdk_window_unmaximize ( gtk_widget_get_window (GTK_WIDGET(data)));
 }
 
 static void refresh_window_cb (GtkWidget *widget, gpointer data)
@@ -282,12 +282,9 @@ static void refresh_window_cb (GtkWidget *widget, gpointer data)
     GdkRectangle rect;
     if (GTK_IS_WIDGET(data))
     {
-        if ((GTK_WIDGET(data))->window)
+        if (gtk_widget_get_window (GTK_WIDGET(data)))
         {
-            rect.x = rect.y = 0;
-            rect.width = (GTK_WIDGET(data))->allocation.width;
-            rect.height = (GTK_WIDGET(data))->allocation.height;
-            gdk_window_invalidate_rect ((GTK_WIDGET(data))->window, &rect, TRUE);
+            gdk_window_invalidate_rect (gtk_widget_get_window (GTK_WIDGET(data)), NULL, TRUE);
         }
     }
 }
@@ -298,8 +295,8 @@ static void move_window_cb (GtkWidget *widget, guint x, guint y, gpointer data)
     DEBUG_ASSERT (data != NULL);
 
     if (GTK_IS_WIDGET(data))
-        if ((GTK_WIDGET(data))->window)
-            gdk_window_move ((GTK_WIDGET(data))->window, x, y);
+        if (gtk_widget_get_window (GTK_WIDGET(data)))
+            gdk_window_move (gtk_widget_get_window (GTK_WIDGET(data)), x, y);
 }
 
 static void adjust_font_size (GtkWidget *widget, gpointer data, gint howmuch)
@@ -315,13 +312,13 @@ static void adjust_font_size (GtkWidget *widget, gpointer data, gint howmuch)
 
     /* Read the screen dimensions in cells. */
     terminal = VTE_TERMINAL(widget);
-    columns = terminal->column_count;
-    rows = terminal->row_count;
+    columns = vte_terminal_get_column_count(terminal);//->column_count;
+    rows = vte_terminal_get_row_count(terminal); //->row_count;
 
     /* Take into account padding and border overhead. */
     gtk_window_get_size(GTK_WINDOW(data), &owidth, &oheight);
-    owidth -= terminal->char_width * terminal->column_count;
-    oheight -= terminal->char_height * terminal->row_count;
+    owidth -= vte_terminal_get_char_width(terminal) *  vte_terminal_get_column_count(terminal);//->column_count;
+    oheight -= vte_terminal_get_char_height(terminal)   * vte_terminal_get_row_count(terminal);//->row_count;
 
     /* Calculate the new font size. */
     desired = pango_font_description_copy (vte_terminal_get_font(terminal));
@@ -770,9 +767,9 @@ static int button_press_cb (GtkWidget *widget, GdkEventButton *event, gpointer d
             vte_terminal_get_padding (terminal, &xpad, &ypad);
             match = vte_terminal_match_check (terminal,
                     (event->x - ypad) /
-                    terminal->char_width,
+                    vte_terminal_get_char_width( terminal) , //->char_width,
                     (event->y - ypad) /
-                    terminal->char_height,
+                    vte_terminal_get_char_height( terminal) , //->char_height,
                     &tag);
 
             /* Check if we can launch a web browser, and do so if possible */
diff --git a/src/tilda_window.c b/src/tilda_window.c
index 937f6a2..4169f02 100644
--- a/src/tilda_window.c
+++ b/src/tilda_window.c
@@ -14,6 +14,9 @@
  * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
  */
 
+#include <gtk/gtk.h>
+#include <gdk/gdkkeysyms.h>
+#include <glib-object.h>
 #include <tilda-config.h>
 
 #include <debug.h>
@@ -28,25 +31,22 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include <gtk/gtk.h>
-#include <gdk/gdkkeysyms.h>
-#include <glib-object.h>
 #include <vte/vte.h>
 
 static void
 tilda_window_setup_alpha_mode (tilda_window *tw)
 {
     GdkScreen *screen;
-    GdkColormap *colormap;
+    GdkVisual *visual;
 
     screen = gtk_widget_get_screen (GTK_WIDGET (tw->window));
-    colormap = gdk_screen_get_rgba_colormap (screen);
-    if (colormap != NULL && gdk_screen_is_composited (screen))
+    visual = gdk_screen_get_rgba_visual (screen);
+    if (visual != NULL && gdk_screen_is_composited (screen))
     {
         /* Set RGBA colormap if possible so VTE can use real alpha
          * channels for transparency. */
 
-        gtk_widget_set_colormap(GTK_WIDGET (tw->window), colormap);
+        gtk_widget_set_visual(GTK_WIDGET (tw->window), visual);
         tw->have_argb_visual = TRUE;
     }
     else
@@ -320,11 +320,11 @@ static gint tilda_window_setup_keyboard_accelerators (tilda_window *tw)
 
     /* Go to Next Tab on <Ctrl>Page_Down */
 	//temp = g_cclosure_new_swap (G_CALLBACK(next_tab), tw, NULL);
-	//gtk_accel_group_connect (accel_group, GDK_Page_Down, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE, temp);
+	//gtk_accel_group_connect (accel_group, GDK_KEY_Page_Down, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE, temp);
 
     /* Go to Prev Tab on <Ctrl>Page_Up */
 	//temp = g_cclosure_new_swap (G_CALLBACK(prev_tab), tw, NULL);
-	//gtk_accel_group_connect (accel_group, GDK_Page_Up, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE, temp);
+	//gtk_accel_group_connect (accel_group, GDK_KEY_Page_Up, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE, temp);
 
     /* Add New Tab on <Ctrl><Shift>t */
 	//temp = g_cclosure_new_swap (G_CALLBACK(tilda_window_add_tab), tw, NULL);
@@ -337,34 +337,34 @@ static gint tilda_window_setup_keyboard_accelerators (tilda_window *tw)
     /* Goto Tab # */
     /* Know a better way? Then you do. */
     //temp = g_cclosure_new_swap (G_CALLBACK(goto_tab_1), tw, NULL);
-    //gtk_accel_group_connect (accel_group, '1', GDK_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
+    //gtk_accel_group_connect (accel_group, '1', GDK_KEY_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
 
     //temp = g_cclosure_new_swap (G_CALLBACK(goto_tab_2), tw, NULL);
-    //gtk_accel_group_connect (accel_group, '2', GDK_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
+    //gtk_accel_group_connect (accel_group, '2', GDK_KEY_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
 
     //temp = g_cclosure_new_swap (G_CALLBACK(goto_tab_3), tw, NULL);
-    //gtk_accel_group_connect (accel_group, '3', GDK_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
+    //gtk_accel_group_connect (accel_group, '3', GDK_KEY_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
 
     //temp = g_cclosure_new_swap (G_CALLBACK(goto_tab_4), tw, NULL);
-    //gtk_accel_group_connect (accel_group, '4', GDK_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
+    //gtk_accel_group_connect (accel_group, '4', GDK_KEY_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
 
     //temp = g_cclosure_new_swap (G_CALLBACK(goto_tab_5), tw, NULL);
-    //gtk_accel_group_connect (accel_group, '5', GDK_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
+    //gtk_accel_group_connect (accel_group, '5', GDK_KEY_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
 
     //temp = g_cclosure_new_swap (G_CALLBACK(goto_tab_6), tw, NULL);
-    //gtk_accel_group_connect (accel_group, '6', GDK_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
+    //gtk_accel_group_connect (accel_group, '6', GDK_KEY_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
 
     //temp = g_cclosure_new_swap (G_CALLBACK(goto_tab_7), tw, NULL);
-    //gtk_accel_group_connect (accel_group, '7', GDK_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
+    //gtk_accel_group_connect (accel_group, '7', GDK_KEY_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
 
     //temp = g_cclosure_new_swap (G_CALLBACK(goto_tab_8), tw, NULL);
-    //gtk_accel_group_connect (accel_group, '8', GDK_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
+    //gtk_accel_group_connect (accel_group, '8', GDK_KEY_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
 
     //temp = g_cclosure_new_swap (G_CALLBACK(goto_tab_9), tw, NULL);
-    //gtk_accel_group_connect (accel_group, '9', GDK_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
+    //gtk_accel_group_connect (accel_group, '9', GDK_KEY_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
 
     //temp = g_cclosure_new_swap (G_CALLBACK(goto_tab_10), tw, NULL);
-    //gtk_accel_group_connect (accel_group, '0', GDK_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
+    //gtk_accel_group_connect (accel_group, '0', GDK_KEY_MOD1_MASK, GTK_ACCEL_VISIBLE, temp);
 
     //temp = g_cclosure_new_swap (G_CALLBACK(ccopy), tw, NULL);
     //gtk_accel_group_connect (accel_group, 'c', GDK_CONTROL_MASK | GDK_SHIFT_MASK, GTK_ACCEL_VISIBLE, temp);
@@ -374,15 +374,15 @@ static gint tilda_window_setup_keyboard_accelerators (tilda_window *tw)
 
     /* zoom up window */
     temp = g_cclosure_new_swap (G_CALLBACK(zoom_down_window), tw, NULL);
-    gtk_accel_group_connect (accel_group, GDK_Up, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE, temp);
+    gtk_accel_group_connect (accel_group, GDK_KEY_Up, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE, temp);
 
     /* zoom down window */
     temp = g_cclosure_new_swap (G_CALLBACK(zoom_up_window), tw, NULL);
-    gtk_accel_group_connect (accel_group, GDK_Down, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE, temp);
+    gtk_accel_group_connect (accel_group, GDK_KEY_Down, GDK_CONTROL_MASK, GTK_ACCEL_VISIBLE, temp);
 
     /* zoom down window */
     temp = g_cclosure_new_swap (G_CALLBACK(full_screen_window), tw, NULL);
-    gtk_accel_group_connect (accel_group, GDK_F11, 0, GTK_ACCEL_VISIBLE, temp);
+    gtk_accel_group_connect (accel_group, GDK_KEY_F11, 0, GTK_ACCEL_VISIBLE, temp);
 
     return 0;
 }
@@ -475,10 +475,10 @@ tilda_window *tilda_window_init (const gchar *config_file, const gint instance)
     }
 
     /* Connect signal handlers */
-    g_signal_connect (G_OBJECT(tw->window), "delete_event", GTK_SIGNAL_FUNC(gtk_main_quit), tw->window);
-    g_signal_connect (G_OBJECT(tw->window), "show", GTK_SIGNAL_FUNC(focus_term), tw->notebook);
+    g_signal_connect (G_OBJECT(tw->window), "delete_event", (gtk_main_quit), tw->window);
+    g_signal_connect (G_OBJECT(tw->window), "show", (focus_term), tw->notebook);
 
-    g_signal_connect (G_OBJECT(tw->window), "focus-out-event", GTK_SIGNAL_FUNC(focus_out_event_cb), tw->window);
+    g_signal_connect (G_OBJECT(tw->window), "focus-out-event", (focus_out_event_cb), tw->window);
 
     /* Add the notebook to the window */
     gtk_container_add (GTK_CONTAINER(tw->window), tw->notebook);
@@ -492,6 +492,9 @@ tilda_window *tilda_window_init (const gchar *config_file, const gint instance)
     gtk_window_move (GTK_WINDOW(tw->window), config_getint ("x_pos"), config_getint ("y_pos"));
     gtk_window_set_default_size (GTK_WINDOW(tw->window), config_getint ("max_width"), config_getint ("max_height"));
     gtk_window_resize (GTK_WINDOW(tw->window), config_getint ("max_width"), config_getint ("max_height"));
+    /* Create GDK resources now, to prevent crashes later on */
+    gtk_widget_realize (tw->window);
+
     generate_animation_positions (tw);
 
     return tw;
@@ -550,7 +553,7 @@ gint tilda_window_add_tab (tilda_window *tw)
     label = gtk_label_new ("Tilda");
     /* Strangely enough, prepend puts pages on the end */
     index = gtk_notebook_prepend_page (GTK_NOTEBOOK(tw->notebook), tt->hbox, label);
-    gtk_notebook_set_tab_label_packing (GTK_NOTEBOOK(tw->notebook), tt->hbox, TRUE, TRUE, GTK_PACK_END);
+    gtk_container_child_set( tw->notebook, tt->hbox, "tab-expand", TRUE, "tab-fill", TRUE, NULL);
     gtk_notebook_set_current_page (GTK_NOTEBOOK(tw->notebook), index);
 
     /* We should show the tabs if there are more than one tab in the notebook */
diff --git a/src/tomboykeybinder.c b/src/tomboykeybinder.c
index 9132683..162dc43 100644
--- a/src/tomboykeybinder.c
+++ b/src/tomboykeybinder.c
@@ -1,7 +1,6 @@
 #include <string.h>
 
-#include <gdk/gdk.h>
-#include <gdk/gdkwindow.h>
+#include <gtk/gtk.h>
 #include <gdk/gdkx.h>
 #include <X11/Xlib.h>
 
@@ -69,7 +68,7 @@ grab_ungrab_with_ignorable_modifiers (GdkWindow *rootwin,
 			XGrabKey (GDK_WINDOW_XDISPLAY (rootwin),
 				  binding->keycode,
 				  binding->modifiers | mod_masks [i],
-				  GDK_WINDOW_XWINDOW (rootwin),
+				  gdk_x11_window_get_xid (rootwin),
 				  False,
 				  GrabModeAsync,
 				  GrabModeAsync);
@@ -77,7 +76,7 @@ grab_ungrab_with_ignorable_modifiers (GdkWindow *rootwin,
 			XUngrabKey (GDK_WINDOW_XDISPLAY (rootwin),
 				    binding->keycode,
 				    binding->modifiers | mod_masks [i],
-				    GDK_WINDOW_XWINDOW (rootwin));
+				    gdk_x11_window_get_xid (rootwin));
 		}
 	}
 }
@@ -294,7 +293,7 @@ tomboy_keybinder_is_modifier (guint keycode)
 	XModifierKeymap *mod_keymap;
 	gboolean retval = FALSE;
 
-	mod_keymap = XGetModifierMapping (gdk_display);
+	mod_keymap = XGetModifierMapping (gdk_x11_get_default_xdisplay());
 
 	map_size = 8 * mod_keymap->max_keypermod;
 
diff --git a/src/wizard.c b/src/wizard.c
index c8ce9a0..cfb7603 100644
--- a/src/wizard.c
+++ b/src/wizard.c
@@ -26,7 +26,6 @@
 #include <callback_func.h>
 
 #include <gtk/gtk.h>
-#include <glade/glade.h>
 #include <gdk/gdkkeysyms.h>
 #include <vte/vte.h> /* VTE_* constants, mostly */
 #include <stdio.h>
@@ -46,7 +45,7 @@ static enum dimensions { HEIGHT, WIDTH };
  * Note that for libglade to autoconnect signals, the functions that it hooks
  * to must NOT be marked static. I decided against the autoconnect just to
  * keep things "in the code" so that they can be grepped for easily. */
-static GladeXML *xml = NULL;
+static GtkBuilder *builder= NULL;
 
 /* This is terrible. We're keeping a local copy of a variable that
  * should probably be project global, because we use it everywhere.
@@ -71,27 +70,24 @@ gint wizard (tilda_window *ltw)
     GtkWidget *wizard_window;
 
     /* Make sure that there isn't already a wizard showing */
-    if (xml) {
+    if (builder) {
         DEBUG_ERROR ("wizard started while one already active");
         return 1;
     }
 
-#if ENABLE_NLS
-    xml = glade_xml_new (glade_file, NULL, PACKAGE);
-#else
-    xml = glade_xml_new (glade_file, NULL, NULL);
-#endif
+    builder = gtk_builder_new();
 
-    if (!xml) {
+    if(gtk_builder_add_from_file(builder,glade_file,NULL)==0)
+    {
         g_warning ("problem while loading the tilda.glade file");
         return 2;
     }
 
-    wizard_window = glade_xml_get_widget (xml, "wizard_window");
+    wizard_window = gtk_builder_get_object  (builder, "wizard_window");
 
     /* We're up and running now, so now connect all of the signal handlers.
      * NOTE: I decided to do this manually, since it is safer that way. */
-    //glade_xml_signal_autoconnect(xml);
+    //glade_builder_signal_autoconnect(builder);
 
     /* See the notes above, where the tw variable is declared.
      * I know how ugly this is ... */
@@ -130,9 +126,9 @@ static void wizard_closed ()
 {
     DEBUG_FUNCTION ("wizard_closed");
 
-    const GtkWidget *entry_keybinding = glade_xml_get_widget (xml, "entry_keybinding");
-    const GtkWidget *entry_custom_command = glade_xml_get_widget (xml, "entry_custom_command");
-    const GtkWidget *wizard_window = glade_xml_get_widget (xml, "wizard_window");
+    const GtkWidget *entry_keybinding = gtk_builder_get_object (builder, "entry_keybinding");
+    const GtkWidget *entry_custom_command = gtk_builder_get_object (builder, "entry_custom_command");
+    const GtkWidget *wizard_window = gtk_builder_get_object (builder, "wizard_window");
 
     gchar *key = gtk_entry_get_text (GTK_ENTRY(entry_keybinding));
     gchar *command = gtk_entry_get_text (GTK_ENTRY(entry_custom_command));
@@ -155,8 +151,8 @@ static void wizard_closed ()
     config_setstr ("command", command);
 
     /* Free the libglade data structure */
-    g_object_unref (G_OBJECT(xml));
-    xml = NULL;
+    g_object_unref (G_OBJECT(builder));
+    builder = NULL;
 
     /* Remove the wizard */
     gtk_widget_destroy (wizard_window);
@@ -207,9 +203,9 @@ static void wizard_key_grab (GtkWidget *wizard_window, GdkEventKey *event)
     DEBUG_ASSERT (wizard_window != NULL);
     DEBUG_ASSERT (event != NULL);
 
-    const GtkWidget *button_grab_keybinding = glade_xml_get_widget (xml, "button_grab_keybinding");
-    const GtkWidget *wizard_notebook = glade_xml_get_widget (xml, "wizard_notebook");
-    const GtkWidget *entry_keybinding = glade_xml_get_widget (xml, "entry_keybinding");
+    const GtkWidget *button_grab_keybinding = gtk_builder_get_object (builder, "button_grab_keybinding");
+    const GtkWidget *wizard_notebook = gtk_builder_get_object (builder, "wizard_notebook");
+    const GtkWidget *entry_keybinding = gtk_builder_get_object (builder, "entry_keybinding");
     gchar *key;
 
     if (gtk_accelerator_valid (event->keyval, event->state))
@@ -232,7 +228,7 @@ static void wizard_key_grab (GtkWidget *wizard_window, GdkEventKey *event)
         gtk_widget_set_sensitive (wizard_notebook, TRUE);
 
         /* Disconnect the key grabber */
-        g_signal_handlers_disconnect_by_func (GTK_OBJECT(wizard_window), GTK_SIGNAL_FUNC(wizard_key_grab), NULL);
+        g_signal_handlers_disconnect_by_func ((wizard_window), (wizard_key_grab), NULL);
 
         /* Copy the pressed key to the text entry */
         gtk_entry_set_text (GTK_ENTRY(entry_keybinding), key);
@@ -299,9 +295,9 @@ static void window_title_change_all ()
 
 static void set_spin_value_while_blocking_callback (GtkSpinButton *spin, void (*callback)(GtkWidget *w), gint new_val)
 {
-    g_signal_handlers_block_by_func (spin, GTK_SIGNAL_FUNC(*callback), NULL);
+    g_signal_handlers_block_by_func (spin, (*callback), NULL);
     gtk_spin_button_set_value (GTK_SPIN_BUTTON(spin), new_val);
-    g_signal_handlers_unblock_by_func (spin, GTK_SIGNAL_FUNC(*callback), NULL);
+    g_signal_handlers_unblock_by_func (spin, (*callback), NULL);
 }
 
 /******************************************************************************/
@@ -310,7 +306,7 @@ static void set_spin_value_while_blocking_callback (GtkSpinButton *spin, void (*
 
 static void button_wizard_close_clicked_cb (GtkWidget *w)
 {
-    const GtkWidget *wizard_window = glade_xml_get_widget (xml, "wizard_window");
+    const GtkWidget *wizard_window = gtk_builder_get_object (builder, "wizard_window");
 
     /* Call the clean-up function */
     wizard_closed ();
@@ -489,8 +485,8 @@ static void check_run_custom_command_toggled_cb (GtkWidget *w)
 
     config_setbool ("run_command", status);
 
-    label_custom_command = glade_xml_get_widget (xml, "label_custom_command");
-    entry_custom_command = glade_xml_get_widget (xml, "entry_custom_command");
+    label_custom_command = gtk_builder_get_object (builder, "label_custom_command");
+    entry_custom_command = gtk_builder_get_object (builder, "entry_custom_command");
 
     gtk_widget_set_sensitive (label_custom_command, status);
     gtk_widget_set_sensitive (entry_custom_command, status);
@@ -523,7 +519,7 @@ static void spin_width_pixels_value_changed_cb (GtkWidget *w);
 
 static void spin_height_percentage_value_changed_cb (GtkWidget *w)
 {
-    const GtkWidget *spin_height_pixels = glade_xml_get_widget (xml, "spin_height_pixels");
+    const GtkWidget *spin_height_pixels = gtk_builder_get_object (builder, "spin_height_pixels");
     const gint h_pct = gtk_spin_button_get_value_as_int (GTK_SPIN_BUTTON(w));
     const gint h_pix = percentage2pixels (h_pct, HEIGHT);
 
@@ -543,7 +539,7 @@ static void spin_height_percentage_value_changed_cb (GtkWidget *w)
 
 static void spin_height_pixels_value_changed_cb (GtkWidget *w)
 {
-    const GtkWidget *spin_height_percentage = glade_xml_get_widget (xml, "spin_height_percentage");
+    const GtkWidget *spin_height_percentage = gtk_builder_get_object (builder, "spin_height_percentage");
     const gint h_pix = gtk_spin_button_get_value_as_int (GTK_SPIN_BUTTON(w));
     const gint h_pct = pixels2percentage (h_pix, HEIGHT);
 
@@ -563,7 +559,7 @@ static void spin_height_pixels_value_changed_cb (GtkWidget *w)
 
 static void spin_width_percentage_value_changed_cb (GtkWidget *w)
 {
-    const GtkWidget *spin_width_pixels = glade_xml_get_widget (xml, "spin_width_pixels");
+    const GtkWidget *spin_width_pixels = gtk_builder_get_object (builder, "spin_width_pixels");
     const gint w_pct = gtk_spin_button_get_value_as_int (GTK_SPIN_BUTTON(w));
     const gint w_pix = percentage2pixels (w_pct, WIDTH);
 
@@ -583,7 +579,7 @@ static void spin_width_percentage_value_changed_cb (GtkWidget *w)
 
 static void spin_width_pixels_value_changed_cb (GtkWidget *w)
 {
-    const GtkWidget *spin_width_percentage = glade_xml_get_widget (xml, "spin_width_percentage");
+    const GtkWidget *spin_width_percentage = gtk_builder_get_object (builder, "spin_width_percentage");
     const gint w_pix = gtk_spin_button_get_value_as_int (GTK_SPIN_BUTTON(w));
     const gint w_pct = pixels2percentage (w_pix, WIDTH);
 
@@ -604,8 +600,8 @@ static void spin_width_pixels_value_changed_cb (GtkWidget *w)
 static void check_centered_horizontally_toggled_cb (GtkWidget *w)
 {
     const gboolean status = gtk_toggle_button_get_active (GTK_TOGGLE_BUTTON(w));
-    const GtkWidget *label_x_position = glade_xml_get_widget (xml, "label_x_position");
-    const GtkWidget *spin_x_position = glade_xml_get_widget (xml, "spin_x_position");
+    const GtkWidget *label_x_position = gtk_builder_get_object (builder, "label_x_position");
+    const GtkWidget *spin_x_position = gtk_builder_get_object (builder, "spin_x_position");
 
     config_setbool ("centered_horizontally", status);
 
@@ -640,8 +636,8 @@ static void spin_x_position_value_changed_cb (GtkWidget *w)
 static void check_centered_vertically_toggled_cb (GtkWidget *w)
 {
     const gboolean status = gtk_toggle_button_get_active (GTK_TOGGLE_BUTTON(w));
-    const GtkWidget *label_y_position = glade_xml_get_widget (xml, "label_y_position");
-    const GtkWidget *spin_y_position = glade_xml_get_widget (xml, "spin_y_position");
+    const GtkWidget *label_y_position = gtk_builder_get_object (builder, "label_y_position");
+    const GtkWidget *spin_y_position = gtk_builder_get_object (builder, "spin_y_position");
 
     config_setbool ("centered_vertically", status);
 
@@ -676,8 +672,8 @@ static void spin_y_position_value_changed_cb (GtkWidget *w)
 static void check_enable_transparency_toggled_cb (GtkWidget *w)
 {
     const gboolean status = gtk_toggle_button_get_active (GTK_TOGGLE_BUTTON(w));
-    const GtkWidget *label_level_of_transparency = glade_xml_get_widget (xml, "label_level_of_transparency");
-    const GtkWidget *spin_level_of_transparency = glade_xml_get_widget (xml, "spin_level_of_transparency");
+    const GtkWidget *label_level_of_transparency = gtk_builder_get_object (builder, "label_level_of_transparency");
+    const GtkWidget *spin_level_of_transparency = gtk_builder_get_object (builder, "spin_level_of_transparency");
     const gdouble transparency_level = (gtk_spin_button_get_value_as_int (GTK_SPIN_BUTTON(spin_level_of_transparency)) / 100.0);
     gint i;
     tilda_term *tt;
@@ -742,10 +738,10 @@ static void combo_animation_orientation_changed_cb (GtkWidget *w)
 static void check_animated_pulldown_toggled_cb (GtkWidget *w)
 {
     const gint status = gtk_toggle_button_get_active (GTK_TOGGLE_BUTTON(w));
-    const GtkWidget *label_animation_delay = glade_xml_get_widget (xml, "label_animation_delay");
-    const GtkWidget *spin_animation_delay = glade_xml_get_widget (xml, "spin_animation_delay");
-    const GtkWidget *label_animation_orientation = glade_xml_get_widget (xml, "label_animation_orientation");
-    const GtkWidget *combo_animation_orientation = glade_xml_get_widget (xml, "combo_animation_orientation");
+    const GtkWidget *label_animation_delay = gtk_builder_get_object (builder, "label_animation_delay");
+    const GtkWidget *spin_animation_delay = gtk_builder_get_object (builder, "spin_animation_delay");
+    const GtkWidget *label_animation_orientation = gtk_builder_get_object (builder, "label_animation_orientation");
+    const GtkWidget *combo_animation_orientation = gtk_builder_get_object (builder, "combo_animation_orientation");
 
     gtk_widget_set_sensitive (label_animation_delay, status);
     gtk_widget_set_sensitive (spin_animation_delay, status);
@@ -777,7 +773,7 @@ static void check_animated_pulldown_toggled_cb (GtkWidget *w)
 static void check_use_image_for_background_toggled_cb (GtkWidget *w)
 {
     const gboolean status = gtk_toggle_button_get_active (GTK_TOGGLE_BUTTON(w));
-    const GtkWidget *button_background_image = glade_xml_get_widget (xml, "button_background_image");
+    const GtkWidget *button_background_image = gtk_builder_get_object (builder, "button_background_image");
     const gchar *image = config_getstr ("image");
     gint i;
     tilda_term *tt;
@@ -817,8 +813,8 @@ static void button_background_image_selection_changed_cb (GtkWidget *w)
 static void combo_colorschemes_changed_cb (GtkWidget *w)
 {
     const gint scheme = gtk_combo_box_get_active (GTK_COMBO_BOX(w));
-    const GtkWidget *colorbutton_text = glade_xml_get_widget (xml, "colorbutton_text");
-    const GtkWidget *colorbutton_back = glade_xml_get_widget (xml, "colorbutton_back");
+    const GtkWidget *colorbutton_text = gtk_builder_get_object (builder, "colorbutton_text");
+    const GtkWidget *colorbutton_back = gtk_builder_get_object (builder, "colorbutton_back");
     GdkColor gdk_text, gdk_back;
     tilda_term *tt;
     gint i;
@@ -869,7 +865,7 @@ static void combo_colorschemes_changed_cb (GtkWidget *w)
 
 static void colorbutton_text_color_set_cb (GtkWidget *w)
 {
-    const GtkWidget *combo_colorschemes = glade_xml_get_widget (xml, "combo_colorschemes");
+    const GtkWidget *combo_colorschemes = gtk_builder_get_object (builder, "combo_colorschemes");
     gint i;
     tilda_term *tt;
     GdkColor gdk_text_color;
@@ -892,7 +888,7 @@ static void colorbutton_text_color_set_cb (GtkWidget *w)
 
 static void colorbutton_back_color_set_cb (GtkWidget *w)
 {
-    const GtkWidget *combo_colorschemes = glade_xml_get_widget (xml, "combo_colorschemes");
+    const GtkWidget *combo_colorschemes = gtk_builder_get_object (builder, "combo_colorschemes");
     gint i;
     tilda_term *tt;
     GdkColor gdk_back_color;
@@ -1022,8 +1018,8 @@ static void combo_delete_binding_changed_cb (GtkWidget *w)
 
 static void button_reset_compatibility_options_clicked_cb (GtkWidget *w)
 {
-    const GtkWidget *combo_backspace_binding = glade_xml_get_widget (xml, "combo_backspace_binding");
-    const GtkWidget *combo_delete_binding = glade_xml_get_widget (xml, "combo_delete_binding");
+    const GtkWidget *combo_backspace_binding = gtk_builder_get_object (builder, "combo_backspace_binding");
+    const GtkWidget *combo_delete_binding = gtk_builder_get_object (builder, "combo_delete_binding");
 
     config_setint ("backspace_key", 0);
     config_setint ("delete_key", 1);
@@ -1034,15 +1030,15 @@ static void button_reset_compatibility_options_clicked_cb (GtkWidget *w)
 
 static void button_grab_keybinding_clicked_cb (GtkWidget *w)
 {
-    const GtkWidget *wizard_notebook = glade_xml_get_widget (xml, "wizard_notebook");
-    const GtkWidget *wizard_window = glade_xml_get_widget (xml, "wizard_window");
+    const GtkWidget *wizard_notebook = gtk_builder_get_object (builder, "wizard_notebook");
+    const GtkWidget *wizard_window = gtk_builder_get_object (builder, "wizard_window");
 
     /* Make the preferences window non-sensitive while we are grabbing keys */
     gtk_widget_set_sensitive (w, FALSE);
     gtk_widget_set_sensitive (wizard_notebook, FALSE);
 
     /* Connect the key grabber to the preferences window */
-    g_signal_connect (GTK_OBJECT(wizard_window), "key_press_event", GTK_SIGNAL_FUNC(wizard_key_grab), NULL);
+    g_signal_connect ((wizard_window), "key_press_event", (wizard_key_grab), NULL);
 }
 
 /******************************************************************************/
@@ -1051,18 +1047,18 @@ static void button_grab_keybinding_clicked_cb (GtkWidget *w)
 
 
 /* Defines to make the process of setting all of the initial values easier */
-#define WIDGET_SET_INSENSITIVE(GLADE_NAME) gtk_widget_set_sensitive (glade_xml_get_widget (xml, (GLADE_NAME)), FALSE)
-#define CHECK_BUTTON(GLADE_NAME,CFG_BOOL) gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON(glade_xml_get_widget(xml, (GLADE_NAME))), config_getbool ((CFG_BOOL)))
-#define COMBO_BOX(GLADE_NAME,CFG_INT) gtk_combo_box_set_active (GTK_COMBO_BOX(glade_xml_get_widget (xml, (GLADE_NAME))), config_getint ((CFG_INT)))
-#define FONT_BUTTON(GLADE_NAME,CFG_STR) gtk_font_button_set_font_name (GTK_FONT_BUTTON(glade_xml_get_widget (xml, (GLADE_NAME))), config_getstr ((CFG_STR)))
-#define TEXT_ENTRY(GLADE_NAME,CFG_STR) gtk_entry_set_text (GTK_ENTRY(glade_xml_get_widget (xml, (GLADE_NAME))), config_getstr ((CFG_STR)))
-#define SPIN_BUTTON(GLADE_NAME,CFG_INT) gtk_spin_button_set_value (GTK_SPIN_BUTTON(glade_xml_get_widget (xml, (GLADE_NAME))), config_getint ((CFG_INT)))
-#define SPIN_BUTTON_SET_RANGE(GLADE_NAME,LOWER,UPPER) gtk_spin_button_set_range (GTK_SPIN_BUTTON(glade_xml_get_widget (xml, (GLADE_NAME))), (LOWER), (UPPER))
-#define SPIN_BUTTON_SET_VALUE(GLADE_NAME,VALUE) gtk_spin_button_set_value (GTK_SPIN_BUTTON(glade_xml_get_widget (xml, (GLADE_NAME))), (VALUE))
-#define FILE_BUTTON(GLADE_NAME,CFG_STR) gtk_file_chooser_set_filename (GTK_FILE_CHOOSER(glade_xml_get_widget (xml, (GLADE_NAME))), config_getstr ((CFG_STR)))
-#define COLOR_BUTTON(GLADE_NAME,COLOR) gtk_color_button_set_color (GTK_COLOR_BUTTON(glade_xml_get_widget (xml, (GLADE_NAME))), (COLOR))
-#define SET_SENSITIVE_BY_CONFIG_BOOL(GLADE_NAME,CFG_BOOL) gtk_widget_set_sensitive (glade_xml_get_widget (xml, (GLADE_NAME)), config_getbool ((CFG_BOOL)))
-#define SET_SENSITIVE_BY_CONFIG_NBOOL(GLADE_NAME,CFG_BOOL) gtk_widget_set_sensitive (glade_xml_get_widget (xml, (GLADE_NAME)), !config_getbool ((CFG_BOOL)))
+#define WIDGET_SET_INSENSITIVE(GLADE_NAME) gtk_widget_set_sensitive (gtk_builder_get_object (builder, (GLADE_NAME)), FALSE)
+#define CHECK_BUTTON(GLADE_NAME,CFG_BOOL) gtk_toggle_button_set_active ((gtk_builder_get_object(builder, (GLADE_NAME))), config_getbool ((CFG_BOOL)))
+#define COMBO_BOX(GLADE_NAME,CFG_INT) gtk_combo_box_set_active ((gtk_builder_get_object (builder, (GLADE_NAME))), config_getint ((CFG_INT)))
+#define FONT_BUTTON(GLADE_NAME,CFG_STR) gtk_font_button_set_font_name ((gtk_builder_get_object (builder, (GLADE_NAME))), config_getstr ((CFG_STR)))
+#define TEXT_ENTRY(GLADE_NAME,CFG_STR) gtk_entry_set_text ((gtk_builder_get_object (builder, (GLADE_NAME))), config_getstr ((CFG_STR)))
+#define SPIN_BUTTON(GLADE_NAME,CFG_INT) gtk_spin_button_set_value ((gtk_builder_get_object (builder, (GLADE_NAME))), config_getint ((CFG_INT)))
+#define SPIN_BUTTON_SET_RANGE(GLADE_NAME,LOWER,UPPER) gtk_spin_button_set_range ((gtk_builder_get_object (builder, (GLADE_NAME))), (LOWER), (UPPER))
+#define SPIN_BUTTON_SET_VALUE(GLADE_NAME,VALUE) gtk_spin_button_set_value ((gtk_builder_get_object (builder, (GLADE_NAME))), (VALUE))
+#define FILE_BUTTON(GLADE_NAME,CFG_STR) gtk_file_chooser_set_filename ((gtk_builder_get_object (builder, (GLADE_NAME))), config_getstr ((CFG_STR)))
+#define COLOR_BUTTON(GLADE_NAME,COLOR) gtk_color_button_set_color ((gtk_builder_get_object (builder, (GLADE_NAME))), (COLOR))
+#define SET_SENSITIVE_BY_CONFIG_BOOL(GLADE_NAME,CFG_BOOL) gtk_widget_set_sensitive (gtk_builder_get_object (builder, (GLADE_NAME)), config_getbool ((CFG_BOOL)))
+#define SET_SENSITIVE_BY_CONFIG_NBOOL(GLADE_NAME,CFG_BOOL) gtk_widget_set_sensitive (gtk_builder_get_object (builder, (GLADE_NAME)), !config_getbool ((CFG_BOOL)))
 
 /* Read all state from the config system, and put it into
  * its visual representation in the wizard. */
@@ -1071,6 +1067,7 @@ static void set_wizard_state_from_config ()
     GdkColor text_color, back_color;
 
     /* General Tab */
+
     CHECK_BUTTON ("check_display_on_all_workspaces", "pinned");
     CHECK_BUTTON ("check_always_on_top", "above");
     CHECK_BUTTON ("check_do_not_show_in_taskbar", "notaskbar");
@@ -1161,7 +1158,7 @@ static void set_wizard_state_from_config ()
     TEXT_ENTRY ("entry_keybinding", "key");
 }
 
-#define CONNECT_SIGNAL(GLADE_WIDGET,SIGNAL_NAME,SIGNAL_HANDLER) g_signal_connect (glade_xml_get_widget (xml, (GLADE_WIDGET)), (SIGNAL_NAME), GTK_SIGNAL_FUNC((SIGNAL_HANDLER)), NULL)
+#define CONNECT_SIGNAL(GLADE_WIDGET,SIGNAL_NAME,SIGNAL_HANDLER) g_signal_connect (gtk_builder_get_object (builder, (GLADE_WIDGET)), (SIGNAL_NAME), ((SIGNAL_HANDLER)), NULL)
 
 /* Connect all signals in the wizard. This should be done after setting all
  * values, that way all of the signal handlers don't get called */
diff --git a/tilda.glade b/tilda.glade
index 4a8ae19..9037a86 100644
--- a/tilda.glade
+++ b/tilda.glade
@@ -1,48 +1,284 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no"?>
-<!DOCTYPE glade-interface SYSTEM "glade-2.0.dtd">
-<!--Generated with glade3 3.2.2 on Wed Jul 18 21:13:21 2007 by irasnyd@kimiko-->
-<glade-interface>
-  <widget class="GtkDialog" id="wizard_window">
+<?xml version="1.0" encoding="UTF-8"?>
+<interface>
+  <!-- interface-requires gtk+ 2.12 -->
+  <object class="GtkAdjustment" id="adjustment1">
+    <property name="upper">100</property>
+    <property name="step_increment">1</property>
+    <property name="page_increment">10</property>
+  </object>
+  <object class="GtkAdjustment" id="adjustment2">
+    <property name="upper">100</property>
+    <property name="step_increment">1</property>
+    <property name="page_increment">10</property>
+  </object>
+  <object class="GtkAdjustment" id="adjustment3">
+    <property name="upper">100</property>
+    <property name="step_increment">1</property>
+    <property name="page_increment">10</property>
+  </object>
+  <object class="GtkAdjustment" id="adjustment4">
+    <property name="upper">100</property>
+    <property name="step_increment">1</property>
+    <property name="page_increment">10</property>
+  </object>
+  <object class="GtkAdjustment" id="adjustment5">
+    <property name="upper">100</property>
+    <property name="step_increment">1</property>
+    <property name="page_increment">10</property>
+  </object>
+  <object class="GtkAdjustment" id="adjustment6">
+    <property name="upper">100</property>
+    <property name="step_increment">1</property>
+    <property name="page_increment">10</property>
+  </object>
+  <object class="GtkAdjustment" id="adjustment7">
+    <property name="upper">100</property>
+    <property name="step_increment">1</property>
+    <property name="page_increment">10</property>
+  </object>
+  <object class="GtkAdjustment" id="adjustment8">
+    <property name="lower">1</property>
+    <property name="upper">2147483647</property>
+    <property name="value">1</property>
+    <property name="step_increment">1</property>
+    <property name="page_increment">10</property>
+  </object>
+  <object class="GtkAdjustment" id="adjustment9">
+    <property name="upper">2147483647</property>
+    <property name="step_increment">1</property>
+    <property name="page_increment">10</property>
+  </object>
+  <object class="GtkListStore" id="model1">
+    <columns>
+      <!-- column-name gchararray -->
+      <column type="gchararray"/>
+    </columns>
+    <data>
+      <row>
+        <col id="0" translatable="yes">Top</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Bottom</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Left</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Right</col>
+      </row>
+    </data>
+  </object>
+  <object class="GtkListStore" id="model2">
+    <columns>
+      <!-- column-name gchararray -->
+      <column type="gchararray"/>
+    </columns>
+    <data>
+      <row>
+        <col id="0" translatable="yes">Isn't displayed</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Goes after initial title</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Goes before initial title</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Replace initial title</col>
+      </row>
+    </data>
+  </object>
+  <object class="GtkListStore" id="model3">
+    <columns>
+      <!-- column-name gchararray -->
+      <column type="gchararray"/>
+    </columns>
+    <data>
+      <row>
+        <col id="0" translatable="yes">Hold the terminal open</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Restart the command</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Exit the terminal</col>
+      </row>
+    </data>
+  </object>
+  <object class="GtkListStore" id="model4">
+    <columns>
+      <!-- column-name gchararray -->
+      <column type="gchararray"/>
+    </columns>
+    <data>
+      <row>
+        <col id="0" translatable="yes">Top</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Bottom</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Left</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Right</col>
+      </row>
+    </data>
+  </object>
+  <object class="GtkListStore" id="model5">
+    <columns>
+      <!-- column-name gchararray -->
+      <column type="gchararray"/>
+    </columns>
+    <data>
+      <row>
+        <col id="0" translatable="yes">Custom</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Green on Black</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Black on White</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">White on Black</col>
+      </row>
+    </data>
+  </object>
+  <object class="GtkListStore" id="model6">
+    <columns>
+      <!-- column-name gchararray -->
+      <column type="gchararray"/>
+    </columns>
+    <data>
+      <row>
+        <col id="0" translatable="yes">On the Left</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">On the Right</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Disabled</col>
+      </row>
+    </data>
+  </object>
+  <object class="GtkListStore" id="model7">
+    <columns>
+      <!-- column-name gchararray -->
+      <column type="gchararray"/>
+    </columns>
+    <data>
+      <row>
+        <col id="0" translatable="yes">ASCII DEL</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Escape sequence</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Control-H</col>
+      </row>
+    </data>
+  </object>
+  <object class="GtkListStore" id="model8">
+    <columns>
+      <!-- column-name gchararray -->
+      <column type="gchararray"/>
+    </columns>
+    <data>
+      <row>
+        <col id="0" translatable="yes">ASCII DEL</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Escape sequence</col>
+      </row>
+      <row>
+        <col id="0" translatable="yes">Control-H</col>
+      </row>
+    </data>
+  </object>
+  <object class="GtkDialog" id="wizard_window">
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Tilda Config</property>
-    <property name="window_position">GTK_WIN_POS_CENTER</property>
-    <property name="type_hint">GDK_WINDOW_TYPE_HINT_NORMAL</property>
-    <property name="has_separator">False</property>
-    <signal name="destroy" handler="button_wizard_close_clicked_cb"/>
+    <property name="window_position">center</property>
+    <property name="type_hint">normal</property>
+    <signal name="destroy" handler="button_wizard_close_clicked_cb" swapped="no"/>
     <child internal-child="vbox">
-      <widget class="GtkVBox" id="dialog-vbox1">
+      <object class="GtkBox" id="dialog-vbox1">
         <property name="visible">True</property>
+        <property name="can_focus">False</property>
         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
         <property name="spacing">2</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area1">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+            <property name="layout_style">end</property>
+            <child>
+              <placeholder/>
+            </child>
+            <child>
+              <object class="GtkButton" id="button_wizard_close">
+                <property name="label">gtk-close</property>
+                <property name="use_action_appearance">False</property>
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="receives_default">False</property>
+                <property name="use_action_appearance">False</property>
+                <property name="use_stock">True</property>
+                <signal name="clicked" handler="button_wizard_close_clicked_cb" swapped="no"/>
+              </object>
+              <packing>
+                <property name="expand">False</property>
+                <property name="fill">True</property>
+                <property name="position">1</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="expand">False</property>
+            <property name="fill">True</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
+          </packing>
+        </child>
         <child>
-          <widget class="GtkNotebook" id="wizard_notebook">
+          <object class="GtkNotebook" id="wizard_notebook">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
             <child>
-              <widget class="GtkTable" id="table_general">
+              <object class="GtkTable" id="table_general">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="n_rows">3</property>
-                <property name="n_columns">1</property>
                 <child>
-                  <widget class="GtkFrame" id="frame_window_display">
+                  <object class="GtkFrame" id="frame_window_display">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment1">
+                      <object class="GtkAlignment" id="alignment1">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table_wdisplay">
+                          <object class="GtkTable" id="table_wdisplay">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="n_rows">3</property>
                             <property name="n_columns">2</property>
                             <property name="homogeneous">True</property>
                             <child>
-                              <widget class="GtkCheckButton" id="check_display_on_all_workspaces">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_display_on_all_workspaces">
                                 <property name="label" translatable="yes">Display on all workspaces</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="y_options">GTK_EXPAND</property>
                                 <property name="x_padding">4</property>
@@ -50,12 +286,15 @@
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_always_on_top">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_always_on_top">
                                 <property name="label" translatable="yes">Always on top</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -65,12 +304,15 @@
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_do_not_show_in_taskbar">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_do_not_show_in_taskbar">
                                 <property name="label" translatable="yes">Do not show in taskbar</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">1</property>
                                 <property name="bottom_attach">2</property>
@@ -80,12 +322,15 @@
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_start_tilda_hidden">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_start_tilda_hidden">
                                 <property name="label" translatable="yes">Start Tilda hidden</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -97,12 +342,15 @@
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_show_notebook_border">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_show_notebook_border">
                                 <property name="label" translatable="yes">Show Notebook Border</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">2</property>
                                 <property name="bottom_attach">3</property>
@@ -112,12 +360,15 @@
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_enable_double_buffering">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_enable_double_buffering">
                                 <property name="label" translatable="yes">Enable Double Buffering</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -128,21 +379,19 @@
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label3">
+                    <child type="label">
+                      <object class="GtkLabel" id="label3">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Window Display&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="y_options"></property>
                     <property name="x_padding">4</property>
@@ -150,26 +399,31 @@
                   </packing>
                 </child>
                 <child>
-                  <widget class="GtkFrame" id="frame_terminal_display">
+                  <object class="GtkFrame" id="frame_terminal_display">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment2">
+                      <object class="GtkAlignment" id="alignment2">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table_tdisplay">
+                          <object class="GtkTable" id="table_tdisplay">
                             <property name="visible">True</property>
-                            <property name="n_rows">1</property>
+                            <property name="can_focus">False</property>
                             <property name="n_columns">2</property>
                             <property name="homogeneous">True</property>
                             <child>
-                              <widget class="GtkCheckButton" id="check_terminal_bell">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_terminal_bell">
                                 <property name="label" translatable="yes">Audible Terminal Bell</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="y_options">GTK_EXPAND</property>
                                 <property name="x_padding">4</property>
@@ -177,12 +431,15 @@
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_cursor_blinks">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_cursor_blinks">
                                 <property name="label" translatable="yes">Cursor Blinks</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -191,21 +448,19 @@
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label4">
+                    <child type="label">
+                      <object class="GtkLabel" id="label4">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Terminal Display&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="top_attach">1</property>
                     <property name="bottom_attach">2</property>
@@ -215,26 +470,32 @@
                   </packing>
                 </child>
                 <child>
-                  <widget class="GtkFrame" id="frame_font">
+                  <object class="GtkFrame" id="frame_font">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment3">
+                      <object class="GtkAlignment" id="alignment3">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table_font">
+                          <object class="GtkTable" id="table_font">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="n_rows">3</property>
                             <property name="n_columns">2</property>
                             <property name="homogeneous">True</property>
                             <child>
-                              <widget class="GtkCheckButton" id="check_enable_antialiasing">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_enable_antialiasing">
                                 <property name="label" translatable="yes">Enable Antialiasing</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="y_options">GTK_EXPAND</property>
                                 <property name="x_padding">4</property>
@@ -242,12 +503,15 @@
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_allow_bold_text">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_allow_bold_text">
                                 <property name="label" translatable="yes">Allow Bold Text</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -257,10 +521,11 @@
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_tab_pos">
+                              <object class="GtkLabel" id="label_tab_pos">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Position of Tabs:</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">1</property>
                                 <property name="bottom_attach">2</property>
@@ -270,13 +535,17 @@
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkComboBox" id="combo_tab_pos">
+                              <object class="GtkComboBox" id="combo_tab_pos">
                                 <property name="visible">True</property>
-                                <property name="items" translatable="yes">Top
-Bottom
-Left
-Right</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                                <property name="model">model1</property>
+                                <child>
+                                  <object class="GtkCellRendererText" id="renderer1"/>
+                                  <attributes>
+                                    <attribute name="text">0</attribute>
+                                  </attributes>
+                                </child>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -288,15 +557,18 @@ Right</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkTable" id="table6">
+                              <object class="GtkTable" id="table6">
                                 <property name="visible">True</property>
-                                <property name="n_rows">1</property>
+                                <property name="can_focus">False</property>
                                 <property name="n_columns">4</property>
                                 <child>
-                                  <widget class="GtkFontButton" id="button_font">
+                                  <object class="GtkFontButton" id="button_font">
+                                    <property name="use_action_appearance">False</property>
                                     <property name="visible">True</property>
-                                    <property name="response_id">0</property>
-                                  </widget>
+                                    <property name="can_focus">False</property>
+                                    <property name="receives_default">False</property>
+                                    <property name="use_action_appearance">False</property>
+                                  </object>
                                   <packing>
                                     <property name="left_attach">1</property>
                                     <property name="right_attach">4</property>
@@ -305,40 +577,40 @@ Right</property>
                                   </packing>
                                 </child>
                                 <child>
-                                  <widget class="GtkAlignment" id="alignment24">
+                                  <object class="GtkAlignment" id="alignment24">
                                     <property name="visible">True</property>
+                                    <property name="can_focus">False</property>
                                     <property name="xalign">0</property>
                                     <property name="xscale">0.5</property>
                                     <child>
-                                      <widget class="GtkLabel" id="label21">
+                                      <object class="GtkLabel" id="label21">
                                         <property name="visible">True</property>
+                                        <property name="can_focus">False</property>
                                         <property name="label" translatable="yes">Font:</property>
-                                      </widget>
+                                      </object>
                                     </child>
-                                  </widget>
+                                  </object>
                                 </child>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="right_attach">2</property>
                                 <property name="top_attach">2</property>
                                 <property name="bottom_attach">3</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label5">
+                    <child type="label">
+                      <object class="GtkLabel" id="label5">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Font&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="top_attach">2</property>
                     <property name="bottom_attach">3</property>
@@ -347,49 +619,47 @@ Right</property>
                     <property name="y_padding">4</property>
                   </packing>
                 </child>
-              </widget>
-              <packing>
-                <property name="tab_expand">False</property>
-              </packing>
+              </object>
             </child>
-            <child>
-              <widget class="GtkLabel" id="label1">
+            <child type="tab">
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">General</property>
-              </widget>
+              </object>
               <packing>
-                <property name="type">tab</property>
-                <property name="tab_expand">False</property>
                 <property name="tab_fill">False</property>
               </packing>
             </child>
             <child>
-              <widget class="GtkTable" id="table_tc">
+              <object class="GtkTable" id="table_tc">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="n_rows">3</property>
-                <property name="n_columns">1</property>
                 <child>
-                  <widget class="GtkFrame" id="frame_url">
+                  <object class="GtkFrame" id="frame_url">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment12">
+                      <object class="GtkAlignment" id="alignment12">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table4">
+                          <object class="GtkTable" id="table4">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <property name="n_rows">1</property>
                             <property name="n_columns">2</property>
                             <child>
-                              <widget class="GtkEntry" id="entry_web_browser">
+                              <object class="GtkEntry" id="entry_web_browser">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
                                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -398,32 +668,31 @@ Right</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label19">
+                              <object class="GtkLabel" id="label19">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
                                 <property name="label" translatable="yes">Web Browser</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="x_padding">4</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label18">
+                    <child type="label">
+                      <object class="GtkLabel" id="label18">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
                         <property name="label" translatable="yes">&lt;b&gt;URL Handling&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="top_attach">2</property>
                     <property name="bottom_attach">3</property>
@@ -433,33 +702,38 @@ Right</property>
                   </packing>
                 </child>
                 <child>
-                  <widget class="GtkFrame" id="frame_title">
+                  <object class="GtkFrame" id="frame_title">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment4">
+                      <object class="GtkAlignment" id="alignment4">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table_title">
+                          <object class="GtkTable" id="table_title">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="n_rows">2</property>
                             <property name="n_columns">2</property>
                             <child>
-                              <widget class="GtkLabel" id="label_initial_title">
+                              <object class="GtkLabel" id="label_initial_title">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Initial Title:</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="x_padding">4</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_dynamically_set">
+                              <object class="GtkLabel" id="label_dynamically_set">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Dynamically-set Title:</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">1</property>
                                 <property name="bottom_attach">2</property>
@@ -468,9 +742,10 @@ Right</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkEntry" id="entry_title">
+                              <object class="GtkEntry" id="entry_title">
                                 <property name="visible">True</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -479,13 +754,17 @@ Right</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkComboBox" id="combo_dynamically_set_title">
+                              <object class="GtkComboBox" id="combo_dynamically_set_title">
                                 <property name="visible">True</property>
-                                <property name="items" translatable="yes">Isn't displayed
-Goes after initial title
-Goes before initial title
-Replace initial title</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                                <property name="model">model2</property>
+                                <child>
+                                  <object class="GtkCellRendererText" id="renderer2"/>
+                                  <attributes>
+                                    <attribute name="text">0</attribute>
+                                  </attributes>
+                                </child>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -495,21 +774,19 @@ Replace initial title</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label6">
+                    <child type="label">
+                      <object class="GtkLabel" id="label6">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Title&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="y_options"></property>
                     <property name="x_padding">4</property>
@@ -517,38 +794,42 @@ Replace initial title</property>
                   </packing>
                 </child>
                 <child>
-                  <widget class="GtkFrame" id="frame_command">
+                  <object class="GtkFrame" id="frame_command">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment5">
+                      <object class="GtkAlignment" id="alignment5">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table_command">
+                          <object class="GtkTable" id="table_command">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="n_rows">3</property>
                             <property name="n_columns">2</property>
                             <child>
-                              <placeholder/>
-                            </child>
-                            <child>
-                              <widget class="GtkCheckButton" id="check_run_custom_command">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_run_custom_command">
                                 <property name="label" translatable="yes">Run a custom command instead of the shell</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="x_padding">4</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_custom_command">
+                              <object class="GtkLabel" id="label_custom_command">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Custom Command:</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">1</property>
                                 <property name="bottom_attach">2</property>
@@ -557,10 +838,11 @@ Replace initial title</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_command_exit">
+                              <object class="GtkLabel" id="label_command_exit">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">When Command Exits:</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">2</property>
                                 <property name="bottom_attach">3</property>
@@ -569,12 +851,17 @@ Replace initial title</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkComboBox" id="combo_command_exit">
+                              <object class="GtkComboBox" id="combo_command_exit">
                                 <property name="visible">True</property>
-                                <property name="items" translatable="yes">Hold the terminal open
-Restart the command
-Exit the terminal</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                                <property name="model">model3</property>
+                                <child>
+                                  <object class="GtkCellRendererText" id="renderer3"/>
+                                  <attributes>
+                                    <attribute name="text">0</attribute>
+                                  </attributes>
+                                </child>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -585,9 +872,10 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkEntry" id="entry_custom_command">
+                              <object class="GtkEntry" id="entry_custom_command">
                                 <property name="visible">True</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -597,21 +885,22 @@ Exit the terminal</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                            <child>
+                              <placeholder/>
+                            </child>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label7">
+                    <child type="label">
+                      <object class="GtkLabel" id="label7">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Command&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="top_attach">1</property>
                     <property name="bottom_attach">2</property>
@@ -620,47 +909,48 @@ Exit the terminal</property>
                     <property name="y_padding">4</property>
                   </packing>
                 </child>
-              </widget>
+              </object>
               <packing>
                 <property name="position">1</property>
-                <property name="tab_expand">False</property>
               </packing>
             </child>
-            <child>
-              <widget class="GtkLabel" id="nb_label_titleandcommand">
+            <child type="tab">
+              <object class="GtkLabel" id="nb_label_titleandcommand">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">Title and Command</property>
-              </widget>
+              </object>
               <packing>
-                <property name="type">tab</property>
                 <property name="position">1</property>
-                <property name="tab_expand">False</property>
                 <property name="tab_fill">False</property>
               </packing>
             </child>
             <child>
-              <widget class="GtkTable" id="table_appearance">
+              <object class="GtkTable" id="table_appearance">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="n_rows">4</property>
-                <property name="n_columns">1</property>
                 <child>
-                  <widget class="GtkFrame" id="frame_height">
+                  <object class="GtkFrame" id="frame_height">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment6">
+                      <object class="GtkAlignment" id="alignment6">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table_height">
+                          <object class="GtkTable" id="table_height">
                             <property name="visible">True</property>
-                            <property name="n_rows">1</property>
+                            <property name="can_focus">False</property>
                             <property name="n_columns">4</property>
                             <child>
-                              <widget class="GtkLabel" id="label_height_percentage">
+                              <object class="GtkLabel" id="label_height_percentage">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Percentage</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="y_options">GTK_EXPAND</property>
                                 <property name="x_padding">4</property>
@@ -668,11 +958,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkSpinButton" id="spin_height_percentage">
+                              <object class="GtkSpinButton" id="spin_height_percentage">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="adjustment">0 0 100 1 10 10</property>
-                              </widget>
+                                <property name="adjustment">adjustment1</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -682,10 +972,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_height_pixels">
+                              <object class="GtkLabel" id="label_height_pixels">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">In Pixels</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">2</property>
                                 <property name="right_attach">3</property>
@@ -695,11 +986,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkSpinButton" id="spin_height_pixels">
+                              <object class="GtkSpinButton" id="spin_height_pixels">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="adjustment">0 0 100 1 10 10</property>
-                              </widget>
+                                <property name="adjustment">adjustment2</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">3</property>
                                 <property name="right_attach">4</property>
@@ -708,21 +999,19 @@ Exit the terminal</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label8">
+                    <child type="label">
+                      <object class="GtkLabel" id="label8">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Height&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="y_options"></property>
                     <property name="x_padding">4</property>
@@ -730,23 +1019,26 @@ Exit the terminal</property>
                   </packing>
                 </child>
                 <child>
-                  <widget class="GtkFrame" id="frame_width">
+                  <object class="GtkFrame" id="frame_width">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment7">
+                      <object class="GtkAlignment" id="alignment7">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table_width">
+                          <object class="GtkTable" id="table_width">
                             <property name="visible">True</property>
-                            <property name="n_rows">1</property>
+                            <property name="can_focus">False</property>
                             <property name="n_columns">4</property>
                             <child>
-                              <widget class="GtkLabel" id="label_width_percentage">
+                              <object class="GtkLabel" id="label_width_percentage">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Percentage</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="y_options">GTK_EXPAND</property>
                                 <property name="x_padding">4</property>
@@ -754,10 +1046,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_width_pixels">
+                              <object class="GtkLabel" id="label_width_pixels">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">In Pixels</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">2</property>
                                 <property name="right_attach">3</property>
@@ -767,11 +1060,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkSpinButton" id="spin_width_percentage">
+                              <object class="GtkSpinButton" id="spin_width_percentage">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="adjustment">0 0 100 1 10 10</property>
-                              </widget>
+                                <property name="adjustment">adjustment3</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -781,11 +1074,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkSpinButton" id="spin_width_pixels">
+                              <object class="GtkSpinButton" id="spin_width_pixels">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="adjustment">0 0 100 1 10 10</property>
-                              </widget>
+                                <property name="adjustment">adjustment4</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">3</property>
                                 <property name="right_attach">4</property>
@@ -794,21 +1087,19 @@ Exit the terminal</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label9">
+                    <child type="label">
+                      <object class="GtkLabel" id="label9">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Width&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="top_attach">1</property>
                     <property name="bottom_attach">2</property>
@@ -818,27 +1109,33 @@ Exit the terminal</property>
                   </packing>
                 </child>
                 <child>
-                  <widget class="GtkFrame" id="frame_position">
+                  <object class="GtkFrame" id="frame_position">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment8">
+                      <object class="GtkAlignment" id="alignment8">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table1">
+                          <object class="GtkTable" id="table1">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="n_rows">2</property>
                             <property name="n_columns">4</property>
                             <child>
-                              <widget class="GtkCheckButton" id="check_centered_horizontally">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_centered_horizontally">
                                 <property name="label" translatable="yes">Centered Horizontally</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="active">True</property>
                                 <property name="draw_indicator">True</property>
-                                <signal name="toggled" handler="check_centered_horizontally_toggled_cb"/>
-                              </widget>
+                                <signal name="toggled" handler="check_centered_horizontally_toggled_cb" swapped="no"/>
+                              </object>
                               <packing>
                                 <property name="right_attach">2</property>
                                 <property name="y_options">GTK_EXPAND</property>
@@ -847,14 +1144,17 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_centered_vertically">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_centered_vertically">
                                 <property name="label" translatable="yes">Centered Vertically</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="active">True</property>
                                 <property name="draw_indicator">True</property>
-                                <signal name="toggled" handler="check_centered_vertically_toggled_cb"/>
-                              </widget>
+                                <signal name="toggled" handler="check_centered_vertically_toggled_cb" swapped="no"/>
+                              </object>
                               <packing>
                                 <property name="left_attach">2</property>
                                 <property name="right_attach">4</property>
@@ -864,10 +1164,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_x_position">
+                              <object class="GtkLabel" id="label_x_position">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">X Position</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">1</property>
                                 <property name="bottom_attach">2</property>
@@ -877,10 +1178,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_y_position">
+                              <object class="GtkLabel" id="label_y_position">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Y Position</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">2</property>
                                 <property name="right_attach">3</property>
@@ -892,11 +1194,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkSpinButton" id="spin_x_position">
+                              <object class="GtkSpinButton" id="spin_x_position">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="adjustment">0 0 100 1 10 10</property>
-                              </widget>
+                                <property name="adjustment">adjustment5</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -908,11 +1210,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkSpinButton" id="spin_y_position">
+                              <object class="GtkSpinButton" id="spin_y_position">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="adjustment">0 0 100 1 10 10</property>
-                              </widget>
+                                <property name="adjustment">adjustment6</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">3</property>
                                 <property name="right_attach">4</property>
@@ -923,21 +1225,19 @@ Exit the terminal</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label10">
+                    <child type="label">
+                      <object class="GtkLabel" id="label10">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Position&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="top_attach">2</property>
                     <property name="bottom_attach">3</property>
@@ -947,28 +1247,31 @@ Exit the terminal</property>
                   </packing>
                 </child>
                 <child>
-                  <widget class="GtkFrame" id="frame_extras">
+                  <object class="GtkFrame" id="frame_extras">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment9">
+                      <object class="GtkAlignment" id="alignment9">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table_extras">
+                          <object class="GtkTable" id="table_extras">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="n_rows">4</property>
                             <property name="n_columns">3</property>
                             <child>
-                              <placeholder/>
-                            </child>
-                            <child>
-                              <widget class="GtkCheckButton" id="check_enable_transparency">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_enable_transparency">
                                 <property name="label" translatable="yes">Enable Transparency</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="y_options">GTK_EXPAND</property>
                                 <property name="x_padding">4</property>
@@ -976,10 +1279,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_level_of_transparency">
+                              <object class="GtkLabel" id="label_level_of_transparency">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Level of Transparency</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -989,11 +1293,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkSpinButton" id="spin_level_of_transparency">
+                              <object class="GtkSpinButton" id="spin_level_of_transparency">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="adjustment">0 0 100 1 10 10</property>
-                              </widget>
+                                <property name="adjustment">adjustment7</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">2</property>
                                 <property name="right_attach">3</property>
@@ -1003,12 +1307,15 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_animated_pulldown">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_animated_pulldown">
                                 <property name="label" translatable="yes">Animated Pulldown</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">1</property>
                                 <property name="bottom_attach">2</property>
@@ -1018,12 +1325,15 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_use_image_for_background">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_use_image_for_background">
                                 <property name="label" translatable="yes">Use Image for Background</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">3</property>
                                 <property name="bottom_attach">4</property>
@@ -1033,10 +1343,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_animation_delay">
+                              <object class="GtkLabel" id="label_animation_delay">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Animation Delay (usec)</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -1048,10 +1359,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_animation_orientation">
+                              <object class="GtkLabel" id="label_animation_orientation">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Animation Orientation</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -1063,11 +1375,11 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkSpinButton" id="spin_animation_delay">
+                              <object class="GtkSpinButton" id="spin_animation_delay">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="adjustment">1 1 2147483647 1 10 10</property>
-                              </widget>
+                                <property name="adjustment">adjustment8</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">2</property>
                                 <property name="right_attach">3</property>
@@ -1079,13 +1391,17 @@ Exit the terminal</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkComboBox" id="combo_animation_orientation">
+                              <object class="GtkComboBox" id="combo_animation_orientation">
                                 <property name="visible">True</property>
-                                <property name="items" translatable="yes">Top
-Bottom
-Left
-Right</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                                <property name="model">model4</property>
+                                <child>
+                                  <object class="GtkCellRendererText" id="renderer4"/>
+                                  <attributes>
+                                    <attribute name="text">0</attribute>
+                                  </attributes>
+                                </child>
+                              </object>
                               <packing>
                                 <property name="left_attach">2</property>
                                 <property name="right_attach">3</property>
@@ -1097,9 +1413,10 @@ Right</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkFileChooserButton" id="button_background_image">
+                              <object class="GtkFileChooserButton" id="button_background_image">
                                 <property name="visible">True</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">3</property>
@@ -1110,21 +1427,22 @@ Right</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                            <child>
+                              <placeholder/>
+                            </child>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label11">
+                    <child type="label">
+                      <object class="GtkLabel" id="label11">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Extras&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="top_attach">3</property>
                     <property name="bottom_attach">4</property>
@@ -1133,46 +1451,47 @@ Right</property>
                     <property name="y_padding">4</property>
                   </packing>
                 </child>
-              </widget>
+              </object>
               <packing>
                 <property name="position">2</property>
-                <property name="tab_expand">False</property>
               </packing>
             </child>
-            <child>
-              <widget class="GtkLabel" id="nb_label_appearance">
+            <child type="tab">
+              <object class="GtkLabel" id="nb_label_appearance">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">Appearance</property>
-              </widget>
+              </object>
               <packing>
-                <property name="type">tab</property>
                 <property name="position">2</property>
-                <property name="tab_expand">False</property>
                 <property name="tab_fill">False</property>
               </packing>
             </child>
             <child>
-              <widget class="GtkTable" id="table_colors">
+              <object class="GtkTable" id="table_colors">
                 <property name="visible">True</property>
-                <property name="n_rows">1</property>
-                <property name="n_columns">1</property>
+                <property name="can_focus">False</property>
                 <child>
-                  <widget class="GtkFrame" id="frame_colors">
+                  <object class="GtkFrame" id="frame_colors">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment10">
+                      <object class="GtkAlignment" id="alignment10">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table_fb_colors">
+                          <object class="GtkTable" id="table_fb_colors">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="n_rows">4</property>
                             <property name="n_columns">2</property>
                             <child>
-                              <widget class="GtkHSeparator" id="hseparator1">
+                              <object class="GtkHSeparator" id="hseparator1">
                                 <property name="visible">True</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                              </object>
                               <packing>
                                 <property name="right_attach">2</property>
                                 <property name="top_attach">1</property>
@@ -1182,23 +1501,28 @@ Right</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_builtin">
+                              <object class="GtkLabel" id="label_builtin">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Built-in Schemes</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="x_padding">4</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkComboBox" id="combo_colorschemes">
+                              <object class="GtkComboBox" id="combo_colorschemes">
                                 <property name="visible">True</property>
-                                <property name="items" translatable="yes">Custom
-Green on Black
-Black on White
-White on Black</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                                <property name="model">model5</property>
+                                <child>
+                                  <object class="GtkCellRendererText" id="renderer5"/>
+                                  <attributes>
+                                    <attribute name="text">0</attribute>
+                                  </attributes>
+                                </child>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -1207,10 +1531,11 @@ White on Black</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_text_color">
+                              <object class="GtkLabel" id="label_text_color">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Text Color</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">2</property>
                                 <property name="bottom_attach">3</property>
@@ -1219,10 +1544,11 @@ White on Black</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_background_color">
+                              <object class="GtkLabel" id="label_background_color">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Background Color</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">3</property>
                                 <property name="bottom_attach">4</property>
@@ -1231,11 +1557,14 @@ White on Black</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkColorButton" id="colorbutton_text">
+                              <object class="GtkColorButton" id="colorbutton_text">
+                                <property name="use_action_appearance">False</property>
                                 <property name="visible">True</property>
-                                <property name="response_id">0</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="color">#000000000000</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -1246,11 +1575,14 @@ White on Black</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkColorButton" id="colorbutton_back">
+                              <object class="GtkColorButton" id="colorbutton_back">
+                                <property name="use_action_appearance">False</property>
                                 <property name="visible">True</property>
-                                <property name="response_id">0</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="color">#000000000000</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -1260,70 +1592,71 @@ White on Black</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label12">
+                    <child type="label">
+                      <object class="GtkLabel" id="label12">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Foreground and Background Colors&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="y_options"></property>
                     <property name="x_padding">4</property>
                     <property name="y_padding">4</property>
                   </packing>
                 </child>
-              </widget>
+              </object>
               <packing>
                 <property name="position">3</property>
-                <property name="tab_expand">False</property>
               </packing>
             </child>
-            <child>
-              <widget class="GtkLabel" id="nb_label_colors">
+            <child type="tab">
+              <object class="GtkLabel" id="nb_label_colors">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">Colors</property>
-              </widget>
+              </object>
               <packing>
-                <property name="type">tab</property>
                 <property name="position">3</property>
-                <property name="tab_expand">False</property>
                 <property name="tab_fill">False</property>
               </packing>
             </child>
             <child>
-              <widget class="GtkTable" id="table_scrolling">
+              <object class="GtkTable" id="table_scrolling">
                 <property name="visible">True</property>
-                <property name="n_rows">1</property>
-                <property name="n_columns">1</property>
+                <property name="can_focus">False</property>
                 <child>
-                  <widget class="GtkFrame" id="frame_scrolling">
+                  <object class="GtkFrame" id="frame_scrolling">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment11">
+                      <object class="GtkAlignment" id="alignment11">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table3">
+                          <object class="GtkTable" id="table3">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="n_rows">5</property>
                             <property name="n_columns">2</property>
                             <child>
-                              <widget class="GtkCheckButton" id="check_scroll_on_output">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_scroll_on_output">
                                 <property name="label" translatable="yes">Scroll on Output</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="right_attach">2</property>
                                 <property name="top_attach">2</property>
@@ -1333,12 +1666,15 @@ White on Black</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_scroll_on_keystroke">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_scroll_on_keystroke">
                                 <property name="label" translatable="yes">Scroll on Keystroke</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="right_attach">2</property>
                                 <property name="top_attach">3</property>
@@ -1348,12 +1684,15 @@ White on Black</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkCheckButton" id="check_scroll_background">
-                                <property name="visible">True</property>
+                              <object class="GtkCheckButton" id="check_scroll_background">
                                 <property name="label" translatable="yes">Scroll Background</property>
-                                <property name="response_id">0</property>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="draw_indicator">True</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="right_attach">2</property>
                                 <property name="top_attach">4</property>
@@ -1363,29 +1702,36 @@ White on Black</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkHBox" id="hbox1">
+                              <object class="GtkHBox" id="hbox1">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <child>
-                                  <widget class="GtkSpinButton" id="spin_scrollback_amount">
+                                  <object class="GtkSpinButton" id="spin_scrollback_amount">
                                     <property name="visible">True</property>
                                     <property name="can_focus">True</property>
-                                    <property name="adjustment">0 0 2147483647 1 10 10</property>
-                                  </widget>
+                                    <property name="adjustment">adjustment9</property>
+                                  </object>
                                   <packing>
+                                    <property name="expand">True</property>
+                                    <property name="fill">True</property>
                                     <property name="padding">4</property>
+                                    <property name="position">0</property>
                                   </packing>
                                 </child>
                                 <child>
-                                  <widget class="GtkLabel" id="label_scrollback_lines">
+                                  <object class="GtkLabel" id="label_scrollback_lines">
                                     <property name="visible">True</property>
+                                    <property name="can_focus">False</property>
                                     <property name="label" translatable="yes">lines</property>
-                                  </widget>
+                                  </object>
                                   <packing>
+                                    <property name="expand">True</property>
+                                    <property name="fill">True</property>
                                     <property name="padding">4</property>
                                     <property name="position">1</property>
                                   </packing>
                                 </child>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -1394,12 +1740,17 @@ White on Black</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkComboBox" id="combo_scrollbar_position">
+                              <object class="GtkComboBox" id="combo_scrollbar_position">
                                 <property name="visible">True</property>
-                                <property name="items" translatable="yes">On the Left
-On the Right
-Disabled</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                                <property name="model">model6</property>
+                                <child>
+                                  <object class="GtkCellRendererText" id="renderer6"/>
+                                  <attributes>
+                                    <attribute name="text">0</attribute>
+                                  </attributes>
+                                </child>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -1408,10 +1759,11 @@ Disabled</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_scrollback">
+                              <object class="GtkLabel" id="label_scrollback">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Scrollback:</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="top_attach">1</property>
                                 <property name="bottom_attach">2</property>
@@ -1421,117 +1773,126 @@ Disabled</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="label_scrollbar_pos">
+                              <object class="GtkLabel" id="label_scrollbar_pos">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Scrollbar is:</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="x_options">GTK_FILL</property>
                                 <property name="x_padding">4</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label13">
+                    <child type="label">
+                      <object class="GtkLabel" id="label13">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Scrolling&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="y_options"></property>
                     <property name="x_padding">4</property>
                     <property name="y_padding">4</property>
                   </packing>
                 </child>
-              </widget>
+              </object>
               <packing>
                 <property name="position">4</property>
-                <property name="tab_expand">False</property>
               </packing>
             </child>
-            <child>
-              <widget class="GtkLabel" id="label2">
+            <child type="tab">
+              <object class="GtkLabel" id="label2">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">Scrolling</property>
-              </widget>
+              </object>
               <packing>
-                <property name="type">tab</property>
                 <property name="position">4</property>
-                <property name="tab_expand">False</property>
                 <property name="tab_fill">False</property>
               </packing>
             </child>
             <child>
-              <widget class="GtkVBox" id="vbox3">
+              <object class="GtkVBox" id="vbox3">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="border_width">12</property>
                 <property name="spacing">6</property>
                 <child>
-                  <widget class="GtkLabel" id="label14">
+                  <object class="GtkLabel" id="label14">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="xalign">0</property>
                     <property name="label" translatable="yes">&lt;b&gt;Compatibility&lt;/b&gt;</property>
                     <property name="use_markup">True</property>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="expand">False</property>
                     <property name="fill">False</property>
+                    <property name="position">0</property>
                   </packing>
                 </child>
                 <child>
-                  <widget class="GtkHBox" id="hbox3">
+                  <object class="GtkHBox" id="hbox3">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <child>
-                      <widget class="GtkLabel" id="label16">
+                      <object class="GtkLabel" id="label16">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">    </property>
-                      </widget>
+                      </object>
                       <packing>
                         <property name="expand">False</property>
                         <property name="fill">False</property>
+                        <property name="position">0</property>
                       </packing>
                     </child>
                     <child>
-                      <widget class="GtkVBox" id="vbox4">
+                      <object class="GtkVBox" id="vbox4">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="spacing">6</property>
                         <child>
-                          <widget class="GtkLabel" id="label17">
+                          <object class="GtkLabel" id="label17">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="xalign">0</property>
                             <property name="yalign">7.4505801528346183e-09</property>
                             <property name="label" translatable="yes">&lt;small&gt;&lt;i&gt;&lt;b&gt;Note:&lt;/b&gt; These options may cause some applications to behave incorrectly.  They are only here to allow you to work around certain applications and operating systems that expect different terminal behavior.&lt;/i&gt;&lt;/small&gt;</property>
                             <property name="use_markup">True</property>
                             <property name="wrap">True</property>
-                          </widget>
+                          </object>
                           <packing>
                             <property name="expand">False</property>
+                            <property name="fill">True</property>
+                            <property name="position">0</property>
                           </packing>
                         </child>
                         <child>
-                          <widget class="GtkTable" id="table2">
+                          <object class="GtkTable" id="table2">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="n_rows">2</property>
                             <property name="n_columns">3</property>
                             <property name="column_spacing">12</property>
                             <property name="row_spacing">6</property>
                             <child>
-                              <widget class="GtkLabel" id="delete-binding-combobox-label3">
+                              <object class="GtkLabel" id="delete-binding-combobox-label3">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="xalign">0</property>
                                 <property name="label" translatable="yes">_Delete key generates:</property>
                                 <property name="use_underline">True</property>
-                                <property name="justify">GTK_JUSTIFY_CENTER</property>
-                              </widget>
+                                <property name="justify">center</property>
+                              </object>
                               <packing>
                                 <property name="top_attach">1</property>
                                 <property name="bottom_attach">2</property>
@@ -1540,25 +1901,31 @@ Disabled</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkLabel" id="backspace-binding-combobox-label3">
+                              <object class="GtkLabel" id="backspace-binding-combobox-label3">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="xalign">0</property>
                                 <property name="label" translatable="yes">_Backspace key generates:</property>
                                 <property name="use_underline">True</property>
-                                <property name="justify">GTK_JUSTIFY_CENTER</property>
-                              </widget>
+                                <property name="justify">center</property>
+                              </object>
                               <packing>
                                 <property name="x_options">GTK_FILL</property>
                                 <property name="y_options"></property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkComboBox" id="combo_backspace_binding">
+                              <object class="GtkComboBox" id="combo_backspace_binding">
                                 <property name="visible">True</property>
-                                <property name="items" translatable="yes">ASCII DEL
-Escape sequence
-Control-H</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                                <property name="model">model7</property>
+                                <child>
+                                  <object class="GtkCellRendererText" id="renderer7"/>
+                                  <attributes>
+                                    <attribute name="text">0</attribute>
+                                  </attributes>
+                                </child>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">3</property>
@@ -1566,12 +1933,17 @@ Control-H</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkComboBox" id="combo_delete_binding">
+                              <object class="GtkComboBox" id="combo_delete_binding">
                                 <property name="visible">True</property>
-                                <property name="items" translatable="yes">ASCII DEL
-Escape sequence
-Control-H</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                                <property name="model">model8</property>
+                                <child>
+                                  <object class="GtkCellRendererText" id="renderer8"/>
+                                  <attributes>
+                                    <attribute name="text">0</attribute>
+                                  </attributes>
+                                </child>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">3</property>
@@ -1580,85 +1952,94 @@ Control-H</property>
                                 <property name="y_options">GTK_FILL</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                           <packing>
                             <property name="expand">False</property>
+                            <property name="fill">True</property>
                             <property name="position">1</property>
                           </packing>
                         </child>
                         <child>
-                          <widget class="GtkAlignment" id="alignment23">
+                          <object class="GtkAlignment" id="alignment23">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="xalign">1.1175900205273592e-08</property>
                             <property name="xscale">0</property>
                             <property name="yscale">0</property>
                             <child>
-                              <widget class="GtkButton" id="button_reset_compatibility_options">
+                              <object class="GtkButton" id="button_reset_compatibility_options">
+                                <property name="label" translatable="yes">_Reset Compatibility Options to Defaults</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="label" translatable="yes">_Reset Compatibility Options to Defaults</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
                                 <property name="use_underline">True</property>
-                                <property name="response_id">0</property>
-                              </widget>
+                              </object>
                             </child>
-                          </widget>
+                          </object>
                           <packing>
                             <property name="expand">False</property>
                             <property name="fill">False</property>
                             <property name="position">2</property>
                           </packing>
                         </child>
-                      </widget>
+                      </object>
                       <packing>
+                        <property name="expand">True</property>
+                        <property name="fill">True</property>
                         <property name="position">1</property>
                       </packing>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
+                    <property name="expand">True</property>
+                    <property name="fill">True</property>
                     <property name="position">1</property>
                   </packing>
                 </child>
-              </widget>
+              </object>
               <packing>
                 <property name="position">5</property>
-                <property name="tab_expand">False</property>
               </packing>
             </child>
-            <child>
-              <widget class="GtkLabel" id="nb_label_compatibility">
+            <child type="tab">
+              <object class="GtkLabel" id="nb_label_compatibility">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">Compatibility</property>
-              </widget>
+              </object>
               <packing>
-                <property name="type">tab</property>
                 <property name="position">5</property>
-                <property name="tab_expand">False</property>
                 <property name="tab_fill">False</property>
               </packing>
             </child>
             <child>
-              <widget class="GtkTable" id="table_keybindings">
+              <object class="GtkTable" id="table_keybindings">
                 <property name="visible">True</property>
-                <property name="n_rows">1</property>
-                <property name="n_columns">1</property>
+                <property name="can_focus">False</property>
                 <child>
-                  <widget class="GtkFrame" id="frame_pulldown">
+                  <object class="GtkFrame" id="frame_pulldown">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="label_xalign">0</property>
                     <child>
-                      <widget class="GtkAlignment" id="alignment13">
+                      <object class="GtkAlignment" id="alignment13">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="left_padding">12</property>
                         <child>
-                          <widget class="GtkTable" id="table5">
+                          <object class="GtkTable" id="table5">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="n_rows">2</property>
                             <property name="n_columns">2</property>
                             <child>
-                              <widget class="GtkLabel" id="label_pulldown_keybinding">
+                              <object class="GtkLabel" id="label_pulldown_keybinding">
                                 <property name="visible">True</property>
+                                <property name="can_focus">False</property>
                                 <property name="label" translatable="yes">Key Binding</property>
-                              </widget>
+                              </object>
                               <packing>
                                 <property name="y_options">GTK_EXPAND</property>
                                 <property name="x_padding">4</property>
@@ -1666,9 +2047,10 @@ Control-H</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkEntry" id="entry_keybinding">
+                              <object class="GtkEntry" id="entry_keybinding">
                                 <property name="visible">True</property>
-                              </widget>
+                                <property name="can_focus">False</property>
+                              </object>
                               <packing>
                                 <property name="left_attach">1</property>
                                 <property name="right_attach">2</property>
@@ -1678,11 +2060,14 @@ Control-H</property>
                               </packing>
                             </child>
                             <child>
-                              <widget class="GtkButton" id="button_grab_keybinding">
-                                <property name="visible">True</property>
+                              <object class="GtkButton" id="button_grab_keybinding">
                                 <property name="label" translatable="yes">Grab Keybinding</property>
-                                <property name="response_id">0</property>
-                              </widget>
+                                <property name="use_action_appearance">False</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="receives_default">False</property>
+                                <property name="use_action_appearance">False</property>
+                              </object>
                               <packing>
                                 <property name="right_attach">2</property>
                                 <property name="top_attach">1</property>
@@ -1692,77 +2077,52 @@ Control-H</property>
                                 <property name="y_padding">4</property>
                               </packing>
                             </child>
-                          </widget>
+                          </object>
                         </child>
-                      </widget>
+                      </object>
                     </child>
-                    <child>
-                      <widget class="GtkLabel" id="label15">
+                    <child type="label">
+                      <object class="GtkLabel" id="label15">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
                         <property name="label" translatable="yes">&lt;b&gt;Pulldown Key&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
-                      </widget>
-                      <packing>
-                        <property name="type">label_item</property>
-                      </packing>
+                      </object>
                     </child>
-                  </widget>
+                  </object>
                   <packing>
                     <property name="y_options"></property>
                     <property name="x_padding">4</property>
                     <property name="y_padding">4</property>
                   </packing>
                 </child>
-              </widget>
+              </object>
               <packing>
                 <property name="position">6</property>
-                <property name="tab_expand">False</property>
               </packing>
             </child>
-            <child>
-              <widget class="GtkLabel" id="nb_label_keybindings">
+            <child type="tab">
+              <object class="GtkLabel" id="nb_label_keybindings">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">Keybindings</property>
-              </widget>
+              </object>
               <packing>
-                <property name="type">tab</property>
                 <property name="position">6</property>
-                <property name="tab_expand">False</property>
                 <property name="tab_fill">False</property>
               </packing>
             </child>
-          </widget>
-          <packing>
-            <property name="position">1</property>
-          </packing>
-        </child>
-        <child internal-child="action_area">
-          <widget class="GtkHButtonBox" id="dialog-action_area1">
-            <property name="visible">True</property>
-            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-            <property name="layout_style">GTK_BUTTONBOX_END</property>
-            <child>
-              <placeholder/>
-            </child>
-            <child>
-              <widget class="GtkButton" id="button_wizard_close">
-                <property name="visible">True</property>
-                <property name="label" translatable="yes">gtk-close</property>
-                <property name="use_stock">True</property>
-                <property name="response_id">0</property>
-                <signal name="clicked" handler="button_wizard_close_clicked_cb"/>
-              </widget>
-              <packing>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </widget>
+          </object>
           <packing>
             <property name="expand">False</property>
-            <property name="pack_type">GTK_PACK_END</property>
+            <property name="fill">True</property>
+            <property name="position">1</property>
           </packing>
         </child>
-      </widget>
+      </object>
     </child>
-  </widget>
-</glade-interface>
+    <action-widgets>
+      <action-widget response="0">button_wizard_close</action-widget>
+    </action-widgets>
+  </object>
+</interface>
-- 
1.7.8.rc3

